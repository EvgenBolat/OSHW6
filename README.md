# Хавронич Евгений Алексеевич, БПИ226
---
### Условие:
Разработать программы клиента и сервера, взаимодействующих через разделяемую память с использованием функций UNIX SYSTEM V. Клиент генерирует случайные числа в том же диапазоне, что и ранее рассмотренный пример. Сервер осуществляет их вывод. Предполагается (но специально не контролируется), что запускаются только один клиент и один сервер. Необходимо обеспечить корректное завершение работы для одного клиента и одного сервера, при котором удаляется сегмент разделяемой памяти. Предложить и реализовать свой вариант корректного завершения. Описать этот вариант в отчете. 
Реализовать и описать в отчете дополнительно один или два варианта общего завершения клиента и сервера (+1 балл за каждый вариант). 

### Программы:
Программы размещены в своих папках на соответствующие оценки.

## Работа была написана на оценку 10.
В папке 8 расположены файлы, реализующие сервер и клиент. Корректное завершение достигнуто за счёт отслеживания нажатия ctrc+c в терминале и вызова функции ExitProgram при получении этого сигнала. При нажатии этой комбинации в терминале сервера происходит удаление сегмента разделяемой памяти и уменьшение размера своего адресного пространства, а при нажатии в терминале клиента происходит лишь уменьшение адресного пространства, так как в любом случае сегмент разделяемой памяти будет удалён при завершении сервера.

В папке 9 расположены файлы, реализующие сервер и клиент, причём совместно завершающиеся первым способом. Для этого дополнительно были добавлены участки кода, позволяющие серверу и клиенту получить id потока-собеседника, и при нажатии ctrc+c в одном из них вызовется функция ExitProgram, которая внутри передаст потоку-собеседнику команду SIGINt, которая обработается уже в его функции ExitProgram. Тем самым, программы завершаются совместно.

В папке 10 расположены файлы, реализующие сервер и клиент, причём совместно завершающиеся первым способом. Это достигается добавлением второй разделяемой памяти, куда при попытке выйти из программы ctrc + c, записывается -1, а второй поток, считывая в очередной раз информацию, и получая -1, завершает свою работу. Тем самым, обе программы завершаются совместно.

![](https://i.pinimg.com/564x/8f/87/97/8f87979ac192f55e9441ac51ba1ecdfd.jpg)
